<?xml version="1.0" encoding="UTF-8"?>
<OperationDefinition xmlns="http://hl7.org/fhir" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir file:///C:/Users/Eric/Documents/HL7/FHIR/BUILD_EDIT_FILES/dstu2-fhir-all-xsd/operationdefinition.xsd">
	<id value="patient-docref"/>
	<url value="http://hl7.org/fhir/us/argonaut/OperationDefinition/patient-docref"/>
	<name value="Argonaut Fetch Patient DocumentReferences"/>
	<status value="draft"/>
	<kind value="operation"/>
	<publisher value="Argonaut Project"/>
  <contact>
    <telecom>
      <system value="other"/>
      <value value="http://argonautwiki.hl7.org"/>
    </telecom>
  </contact>
  <date value="2016-10-18"/>
	<description value="This operation is used to return all the references to documents related to the patient described in the resource on which this operation is invoked.
	

The operation takes the input parameters:


- start date
- end date
- document type



and returns a [Bundle](http://hl7.org/fhir/bundle.html) of type &quot;searchset&quot; containing [Argonaut DocumentReference Profiles](http://hl7.org/fhir/us/argonaut/StructureDefinition-argo-documentreference.html) for the patient. If the server has or can create documents that are related to the patient, and that are available for the given user, the server returns the DocumentReference profiles needed to support the records.  The principle intended use for this operation is to provide a provider or patient with access to their available document information.


The server SHOULD return at least all references for documents that it has made available in a document indexing system. In some systems there MAY NOT be pre-existing indices or set of references to a patient's documents at the FHIR endpoint which would result in an empty bundle being returned when using a normal FHIR Query (`GET [base]/DocumentReference?patient=[id]`). This operaton differs from a simple query in that  DocumentReferences may be created 'on-the-fly' in response to this operation.  For example, in some cases the documents themselves may not exist but can be generated when needed so a reference to them can be generated using this operation. If no documents exist and an 'on-demand' document cannot be created then the operation will return an empty search bundle."/>
	<code value="docref"/>
	<notes value="The server is responsible for determining what resources to return as included resources (rather than the client specifying which ones). This frees the client from needing to determine what it could or should ask for

It is assumed that the server has identified and secured the context appropriately, and can either associate the authorization context with a single patient, or determine whether the context has the rights to the nominated patient, if there is one. If there is no nominated patient (e.g. the operation is invoked at the system level) and the context is not associated with a single patient record, then the server should return an error. Specifying the relationship between the context, a user and patient records is outside the scope of this specification"/>
	<system value="false"/>
	<type value="Patient"/>
	<instance value="true"/>
	<parameter>
		<name value="start"/>
		<use value="in"/>
		<min value="0"/>
		<max value="1"/>
		<documentation value="The date range relates to care dates, not record currency dates - e.g. all records relating to care provided in a certain date range. If no start date is provided, all records prior to the end date are in scope."/>
		<type value="date"/>
	</parameter>
	<parameter>
		<name value="end"/>
		<use value="in"/>
		<min value="0"/>
		<max value="1"/>
		<documentation value="The date range relates to care dates, not record currency dates - e.g. all records relating to care provided in a certain date range. If no end date is provided, all records subsequent to the start date are in scope."/>
		<type value="date"/>
	</parameter>
		<parameter>
		<name value="type"/>
		<use value="in"/>
		<min value="0"/>
		<max value="1"/>
		<documentation value="The type relates to document type e.g. for LOINC = 48764-5 (Summary purpose CCD Document) all Continuity of Care documents.  If no type is provided, all document types are in scope."/>
		<type value="CodeableConcept"/>
		<binding>
			<strength value="required"></strength>
			<valueSetUri value="http://hl7.org/fhir/ValueSet/c80-doc-typecodes"></valueSetUri>
		</binding>
	</parameter>
	<parameter>
		<name value="return"/>
		<use value="out"/>
		<min value="1"/>
		<max value="1"/>
		<documentation value="The bundle type is &quot;searchset&quot;containing Argonaut DocumentReference Profiles"/>
		<type value="Bundle"/>
	</parameter>
</OperationDefinition>
